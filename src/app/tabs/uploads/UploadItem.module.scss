.upload {
    display: grid;
    grid-gap: 0.5em;
    grid-template: 1fr / 1fr min-content min-content;
    padding: 0.5em;
    --c-status-primary: var(--c-primary);
    --c-status-secondary: var(--c-primary-accent);

    button {
        @include size(26px);
        @include flex(row, center, center);
        border-radius: 100%;
        border: 2px solid currentColor;

        svg {
            @include size(14px);
            fill: currentColor;
        }

        &.pauseBtn {
            color: var(--c-status-primary);
        }

        &.abortBtn {
            color: var(--c-error);
        }
    }

    @mixin disabledButtons {
        button {
            color: var(--c-text-primary-accent) !important;
            pointer-events: none;
            cursor: not-allowed;
        }
    }

    &[data-state='removed'],
    &[data-state='paused'] {
        --c-status-primary: var(--c-info);
        --c-status-secondary: var(--c-info-accent);
    }

    &[data-state='finished'],
    &[data-state='removed'] {
        @include disabledButtons;
    }

    &[data-state='cancelled'],
    &[data-state='errored'],
    &[data-state='timeout'],
    &[data-state='peer-cancelled'], {
        --c-status-primary: var(--c-error);
        --c-status-secondary: var(--c-error-accent);
        @include disabledButtons;
    }
}

.progressBar {
    @include flex(row, center, center);
    @include font(600, 0.75em);
    position: relative;
    box-shadow: inset 0 0 0 2px var(--c-status-primary); // A border causes a gap
    border-radius: 0.2em;
    padding: 1em 0;
    overflow: hidden;

    p {
        @include position(0, 0, 0, 0);
        @include flex(row, center, center);
        position: absolute;
        text-shadow: 0 0 2px rgba(black, 0.2);
        transition: clip-path 0.3s;

        &:first-child {
            clip-path: inset(0 0 0 var(--text-clip-left));
            color: var(--c-text-primary);
        }

        &:last-child {
            clip-path: inset(0 var(--text-clip-right) 0 0);
            color: var(--c-text-secondary);
        }
    }

    &::before {
        @include pseudo();
        @include size(100%);
        z-index: -1;
        clip-path: inset(0 calc(100% - var(--progress)) 0 0);
        background: striped_background(var(--c-status-primary), var(--c-status-secondary), 8px);
        transition: clip-path 0.3s;
    }
}
